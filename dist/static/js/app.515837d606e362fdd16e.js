webpackJsonp([3],{IcnI:function(e,t,n){"use strict";var o=n("7+uW"),a=n("NYxO");o.default.use(a.a),t.a=new a.a.Store({state:{},modules:{},getters:{},mutations:{},actions:{}})},LGPC:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__=__webpack_require__("mvHQ"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__),__WEBPACK_IMPORTED_MODULE_1__store__=__webpack_require__("IcnI"),__WEBPACK_IMPORTED_MODULE_2_we_vue__=__webpack_require__("MfVK"),__WEBPACK_IMPORTED_MODULE_2_we_vue___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_we_vue__);!function(w){var checkUrl="http://test.moth123.cn/rebate/js/updateDev.json?v="+Date.parse(new Date),downloadWgtUrl=null,downloadApkUrl=null,iosURL=null,oldVer=null,newVer=null,isios=null,isandroid=null,channel=null;function plusReady(){plus.runtime.getProperty(plus.runtime.appid,function(e){oldVer=e.version,localStorage.setItem("version",e.version),checkArguments(),channel=oldVer.split("_")[1],console.log(oldVer),checkUpdate()});var e=null;plus.key.addEventListener("backbutton",function(){var t=plus.webview.getWebviewById("taobao")||null;if(t)t.canBack(function(e){e.canBack?t.back():plus.webview.close(t)});else{var n=window.location.href;console.log(n),RegExp(/#\/(index)/g).test(n)?e?(new Date).getTime()-e<1e3&&plus.runtime.quit():(e=(new Date).getTime(),plus.nativeUI.toast("再按一次退出应用"),setTimeout(function(){e=null},1e3)):history.go(-1)}}),document.addEventListener("newintent",function(){console.log("后台启动"),checkArguments()},!1)}function checkUpdate(){var xhr=new XMLHttpRequest;xhr.onreadystatechange=function(){switch(xhr.readyState){case 4:if(200==xhr.status){var res=eval("("+xhr.responseText+")");newVer=res.version,console.log(newVer),isios=res.ios,iosURL=res.ipaURL,downloadWgtUrl=res.wgtURL,downloadApkUrl=res.apkURL[channel],isandroid=res.android,plus.navigator.hasSplashscreen()?document.addEventListener("splashclosed",checkOs,!1):checkOs()}else console.log("检测更新失败！")}},xhr.open("GET",checkUrl),xhr.send()}function checkOs(){var e=compareVersion(oldVer,newVer);if(console.log("是否差量升级"+e),!e)return!1;if("Android"==plus.os.name){if(1==isandroid)return!1;2==isandroid?__WEBPACK_IMPORTED_MODULE_2_we_vue__.Dialog.confirm({message:"发现新版本，请立即更新体验!",skin:"android",showCancelButton:!0}).then(function(){console.log("ok"),plus.nativeUI.showWaiting("更新中..."),createDownload()}).catch(function(){console.log("cannel")}):downWgt()}else{if(1==isios)return!1;2==isios?plus.nativeUI.alert("发现新版本，请立即更新体验!",function(){plus.runtime.openURL(iosURL)},"提示","立即去更新"):downWgt()}}function compareVersion(e,t){if(!e||!t||""==e||""==t)return!1;for(var n=e.split("_")[0].split(".",4),o=t.split(".",4),a=0;a<n.length&&a<o.length;a++){var i=n[a],r=parseInt(i),s=o[a],l=parseInt(s);if(l>r||s.length>i.length)return!0;if(l<r)return!1}return o.length>n.length&&0==t.indexOf(e)||void 0}function downWgt(){plus.nativeUI.showWaiting("更新文件..."),plus.downloader.createDownload(downloadWgtUrl,{filename:"_doc/update/"},function(e,t){200==t?(console.log("下载wgt成功："+e.filename),installWgt(e.filename)):console.log("下载wgt失败！"),plus.nativeUI.closeWaiting()}).start()}function installWgt(e){plus.nativeUI.showWaiting("安装文件..."),plus.runtime.install(e,{},function(){plus.nativeUI.closeWaiting(),plus.nativeUI.toast("应用资源更新完成！"),plus.runtime.restart()},function(e){plus.nativeUI.closeWaiting(),console.log(e),plus.nativeUI.toast("应用资源更新失败！")})}function createDownload(){plus.downloader.createDownload(downloadApkUrl,{filename:"_doc/download/"},function(e,t){plus.nativeUI.closeWaiting(),200==t?plus.runtime.install(e.filename,{},function(){},function(e){console.log(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(e))}):plus.nativeUI.toast("应用资源更新失败！")}).start()}function checkArguments(){var e=plus.runtime.arguments;if(e&&0==e.indexOf("koudai://")){var t=e.replace(/koudai:\/\//g,""),n=plus.webview.currentWebview().getURL().split("/");n[n.length-1]=t,window.location.href=n.join("/")}}function uploadService(){var e=null!=JSON.parse(localStorage.getItem("kdtt"))?JSON.parse(localStorage.getItem("kdtt")).uuid:"";$.ajax({url:"http://api.55duanzi.com/tt/api/user/time",type:"get",headers:{uuid:e},success:function(e){var t=Date.parse(new Date).toString().slice(0,10),n=e.timestamp-t;localStorage.setItem("timestamp",n),console.log("存储"+localStorage.getItem("timestamp"))},error:function(){localStorage.setItem("timestamp",0)}});var t=localStorage.getItem("version").split("_"),n=localStorage.getItem("imei"),o=null!=localStorage.getItem("kdtt")?"USR_"+JSON.parse(localStorage.getItem("kdtt")).uuid:"GUEST_"+n;$.ajax({url:"http://api.55duanzi.com/z",type:"get",data:{app_version:t[0],app_store:t[1],imei:n,uid:o,action:"15"}})}window.plus?plusReady():document.addEventListener("plusready",plusReady,!1)}(window)},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("//Fk"),a=n.n(o),i=n("7+uW"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view",{staticClass:"wrapper"})],1)},staticRenderFns:[]};var s=n("VU/8")({name:"App"},r,!1,function(e){n("t9GV")},null,null).exports,l=n("/ocq"),u=[{path:"/",name:"index",redirect:{path:"/index"}},{meta:{title:"省钱多多",keepAlive:!1,isBack:!1},path:"/index",name:"index",component:function(e){return n.e(0).then(function(){var t=[n("80bi")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{meta:{title:"更多推荐",keepAlive:!1,isBack:!1},path:"/more",name:"more",component:function(e){return n.e(1).then(function(){var t=[n("8PXf")];e.apply(null,t)}.bind(this)).catch(n.oe)}}],c=(n("j1ja"),{data:function(){return{apiUrl:{getlist:"/tbk/api/goods/couponGoodsList",userAuth:"/tbk/api/user/auth",userToken:"/tbk/api/user/token"}}},methods:{formatDateTime:function(e,t){if(!e)return"";var n=e.getFullYear(),o=e.getMonth()+1;o=o<10?"0"+o:o;var a=e.getDate();a=a<10?"0"+a:a;var i=e.getHours(),r=e.getMinutes(),s=e.getSeconds();return r=r<10?"0"+r:r,s=s<10?"0"+s:s,"y-m-d h-m-s"==t?n+"-"+o+"-"+a+" "+i+":"+r+":"+s:"h-m"==t?" "+i+":"+r:"y-m-d"==t?n+"-"+o+"-"+a:"y/m/d"==t?n+"/"+o+"/"+a:"ymd"==t?n+""+o+a:void 0},goTaobao:function(e){plus.webview.open(e,"taobao")},getCode:function(){try{var e=window.location.href.split("#")[0].split("?")[1].split("&"),t={};return e.forEach(function(e,n){t[e.split("=")[0]]=e.split("=")[1]}),t}catch(e){}},isLogin:function(){return!!(JSON.parse(localStorage.getItem("userInfo"))||{}).uuid}}}),p=n("IcnI"),_=n("mtWM"),d=n.n(_),f=(n("v2ns"),n("7QTg")),g=n.n(f),m=n("MfVK"),h=n.n(m);n("t08Q"),n("LGPC");i.default.use(h.a),i.default.use(g.a),i.default.use(l.a),i.default.mixin(c),i.default.config.productionTip=!1;var v=new l.a({routes:u});i.default.$http=i.default.prototype.$http=d.a.create({baseURL:"http://api.i6bktq.cn:83",withCredentials:!0,timeout:5e3}),i.default.prototype.$http.interceptors.request.use(function(e){return e},function(e){return a.a.reject(e)}),i.default.prototype.$http.interceptors.response.use(function(e){return e},function(e){return a.a.reject(e)}),v.beforeEach(function(e,t,n){e.meta.keepAlive&&(e.meta.isBack=!0),n()}),v.afterEach(function(e,t){e.meta.title&&(document.title=e.meta.title)}),new i.default({router:v,store:p.a,render:function(e){return e(s)}}).$mount("#app")},t08Q:function(e,t){},t9GV:function(e,t){},v2ns:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.515837d606e362fdd16e.js.map